function initChatDrag(event) {
    // Implementation with proper boundary checking, minimum drag threshold, momentum scrolling, and better event handling
    const threshold = 10; // Minimum drag threshold
    let isDragging = false;
    let startY;
    let scrollTop;
    let startScroll;

    const chatPanel = document.getElementById('chat-panel');

    chatPanel.addEventListener('mousedown', (e) => {
        isDragging = true;
        startY = e.pageY - chatPanel.offsetTop;
        scrollTop = chatPanel.scrollTop;
    });

    chatPanel.addEventListener('mouseleave', () => {
        isDragging = false;
    });

    chatPanel.addEventListener('mouseup', () => {
        isDragging = false;
    });

    chatPanel.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        e.preventDefault();
        const y = e.pageY - chatPanel.offsetTop;
        const walk = (y - startY) * 2; // Scroll-fast
        const newScroll = scrollTop - walk;

        // Boundary checking
        if (newScroll < 0) {
            chatPanel.scrollTop = 0;
        } else if (newScroll > chatPanel.scrollHeight - chatPanel.clientHeight) {
            chatPanel.scrollTop = chatPanel.scrollHeight - chatPanel.clientHeight;
        } else {
            chatPanel.scrollTop = newScroll;
        }
    });

    // Implement momentum scrolling if desired
}

function toggleChat(display) {
    const chatPanel = document.getElementById('chat-panel');
    chatPanel.style.display = display ? 'block' : 'none';
    // Additional logic to initialize panel display state if needed
}
